<!DOCTYPE html>
<html>
<head>
    <title>Digital Feedback Form</title>
    <style>
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Customer Feedback Form</h1>
    <form id="feedbackForm" onsubmit="return validateForm()">
        <div>
            <label>Name:</label>
            <input type="text" id="name" name="name">
            <span id="nameError" class="error"></span>
        </div>
        
        <div>
            <label>Email:</label>
            <input type="email" id="email" name="email">
            <span id="emailError" class="error"></span>
        </div>
        
        <div>
            <label>Rating (1-5):</label>
            <input type="number" id="rating" name="rating" min="1" max="5">
            <span id="ratingError" class="error"></span>
        </div>
        
        <div>
            <label>Comments:</label>
            <textarea id="comments" name="comments"></textarea>
            <span id="commentsError" class="error"></span>
        </div>
        
        <button type="submit">Submit Feedback</button>
    </form>

    <script>
        function validateForm() {
            let isValid = true;
            
            // Name validation
            const name = document.getElementById('name').value;
            if (name.trim() === '') {
                document.getElementById('nameError').textContent = 'Name is required';
                isValid = false;
            } else {
                document.getElementById('nameError').textContent = '';
            }
            
            // Email validation
            const email = document.getElementById('email').value;
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                document.getElementById('emailError').textContent = 'Valid email is required';
                isValid = false;
            } else {
                document.getElementById('emailError').textContent = '';
            }
            
            // Rating validation
            const rating = document.getElementById('rating').value;
            if (rating < 1 || rating > 5) {
                document.getElementById('ratingError').textContent = 'Rating must be between 1-5';
                isValid = false;
            } else {
                document.getElementById('ratingError').textContent = '';
            }
            
            // Comments validation
            const comments = document.getElementById('comments').value;
            if (comments.trim() === '') {
                document.getElementById('commentsError').textContent = 'Comments are required';
                isValid = false;
            } else {
                document.getElementById('commentsError').textContent = '';
            }
            
            if (isValid) {
                submitForm();
            }
            
            return false; // Prevent default form submission
        }
        
        function submitForm() {
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                rating: document.getElementById('rating').value,
                comments: document.getElementById('comments').value
            };
            
            // Send data to backend
            fetch('/submit-feedback', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                if (response.ok) {
                    alert('Feedback submitted successfully!');
                    document.getElementById('feedbackForm').reset();
                } else {
                    throw new Error('Submission failed');
                }
            })
            .catch(error => {
                alert('Error submitting feedback: ' + error.message);
            });
        }
    </script>
</body>
</html>